/* ImageCloud-jQuery plugin 2.0 Copyright(c)2011 Alvaro Montoro Dominguez */
;(function($){$.fn.imageCloud=function(o){var ic_s={'width':600,'height':400,'link':false,'color':'#800000','speed':200,'borderSize':6,'borderStyle':'solid','borderRadius':0};return this.each(function(){function ic_f0(v0,v1,v2,v3,v4,v5){if(v0/1+v2/1+v5.borderSize*2>v5.width){return 1}if(v1/1+v3/1+v5.borderSize*2>v5.height){return 1}if(v1<0||v0<0){return 1}for(x=0;x<v4.length;x++){var a1=v4[x][0],a2=v4[x][1],b1=v0,b2=v1,aw=v4[x][2],ah=v4[x][3];bw=v2,bh=v3;if(b1>=a1&&b1<=a1+aw+15&&b2>=a2&&b2<=a2+ah+15){return 1}if(a1>=b1&&a1<=b1+bw+15&&a2>=b2&&a2<=b2+bh+15){return 1}if(b1>=a1&&b1<=a1+aw+15&&a2>=b2&&a2<=b2+bh+15){return 1}if(a1>=b1&&a1<=b1+bw+15&&b2>=a2&&b2<=a2+ah+15){return 1}}return 0}function ic_f1(v0,v1,v2){if(ic_v0==0){ic_v1=0;ic_v2=0;ic_v3=0;ic_v4=0;var v3=new Array(4);v3[0]=ic_v1;v3[1]=ic_v2;v3[2]=ic_v5[ic_v6][0];v3[3]=ic_v5[ic_v6][1];v0.push(v3);return 1}else{if(v1>0){switch(v2){case 0:{ic_v1=Math.floor(Math.random()*(v0[v1-1][0]/1+v0[v1-1][2]/1));ic_v2=v0[v1-1][1]/1+v0[v1-1][3]/1+20;break}case 1:{ic_v1=Math.floor(Math.random()*(v0[v1-1][0]/1+v0[v1-1][2]/1));ic_v2=v0[v1-1][1]/1-v0[v1-1][3]/1-20;break}case 2:{ic_v1=v0[v1-1][0]/1+v0[v1-1][2]/1+20;ic_v2=Math.floor(Math.random()*(v0[v1-1][1]/1+v0[v1-1][3]/1));break}case 3:{ic_v1=v0[v1-1][0]/1-v0[v1-1][2]/1-20;ic_v2=Math.floor(Math.random()*(v0[v1-1][1]/1+v0[v1-1][3]/1));break}}if(ic_f0(ic_v1,ic_v2,ic_v5[ic_v6][0],ic_v5[ic_v6][1],v0,ic_s)==1){return 0}ic_v3=(Math.floor(Math.random()*(ic_v5[ic_v6][0]-ic_v7[ic_v0].width)));ic_v4=(Math.floor(Math.random()*(ic_v5[ic_v6][1]-ic_v7[ic_v0].height)));var v3=new Array(4);v3[0]=ic_v1;v3[1]=ic_v2;v3[2]=ic_v5[ic_v6][0];v3[3]=ic_v5[ic_v6][1];v0.push(v3);return 1}}return 0}if(o){$.extend(ic_s,o)};var $this=$(this),ic_v8="",ic_v9="",ic_va=0,ic_v0=0,ic_vb=0,ic_v6=0,ic_v7,ic_v1=0,ic_v2=0,ic_vc=new Array(),ic_v5=[[50,50],[60,60],[70,70],[80,80],[90,90],[100,100],[120,120],[50,60],[70,50],[80,120],[50,100],[60,150],[150,80],[120,80],[100,60],[150,50],[50,150]];if($this.css("position")!="absolute"){$this.css("position","relative")};$this.height(ic_s.height);$this.width(ic_s.width);$this.css("overflow","visible");$this.attr("class","imagecloud");ic_v7=$this.find("img");while(ic_va==0&&ic_v0<ic_v7.length){var ic_vd=ic_v0;ic_vb=0;ic_v6=Math.floor(Math.random()*(ic_v5.length));while(ic_vd>-1){var ic_ve=0,ic_vf=100;while(ic_ve<ic_vf*4){ic_vb=ic_f1(ic_vc,ic_vd,ic_ve%4);if(ic_vb==1){ic_ve=1000;ic_vd=-1000}ic_ve++}ic_vd--}if(ic_vb==1){ic_v8=ic_v8+'var ic_i'+ic_v0+'w ='+ic_v5[ic_v6][0]+','+'ic_i'+ic_v0+'h ='+ic_v5[ic_v6][1]+','+'ic_i'+ic_v0+'t ='+ic_v2+','+'ic_i'+ic_v0+'l ='+ic_v1+','+'ic_i'+ic_v0+'bgt='+ic_v4+','+'ic_i'+ic_v0+'bgl='+ic_v3+','+'ic_i'+ic_v0+'bgw='+ic_v7[ic_v0].width+','+'ic_i'+ic_v0+'bgh='+ic_v7[ic_v0].height+';\n';ic_v9=ic_v9+'<div id="ic_i'+ic_v0+'" class="ic_i" ';if(ic_s.link&&ic_v7[ic_v0].title){ic_v9=ic_v9+' onclick="window.location=\''+ic_v7[ic_v0].title+'\'" '}ic_v9=ic_v9+' style="overflow:hidden;position:absolute;border-radius:'+ic_s.borderRadius+'px;-moz-border-radius:'+ic_s.borderRadius+'px;-webkit-border-radius:'+ic_s.borderRadius+'px;border:'+ic_s.borderSize+'px '+ic_s.borderStyle+' '+ic_s.color+';cursor:pointer;top:'+ic_v2+'px;left:'+ic_v1+'px;width:'+ic_v5[ic_v6][0]+'px;height:'+ic_v5[ic_v6][1]+'px;"><img src="'+ic_v7[ic_v0].src+'" width="'+ic_v7[ic_v0].width+'" height="'+ic_v7[ic_v0].height+'" style="position:absolute;left:'+ic_v3+'px;top:'+ic_v4+'px;" /></div>\n';ic_v0++}else{ic_va=1}}$this.html('<script>'+ic_v8+"</script>\n"+ic_v9);$(".ic_i").mouseenter(function(){if(!this.v){this.v={id:this.id,ft:eval(this.id+"t"),fl:eval(this.id+"l"),fh:eval(this.id+"h"),fw:eval(this.id+"w"),bt:eval(this.id+"bgt"),bl:eval(this.id+"bgl"),bh:eval(this.id+"bgh"),bw:eval(this.id+"bgw"),st:0}}$(this.v).stop(true,false).animate({st:100},{duration:ic_s.speed,step:function(now,fx){var v0=Math.floor((fx.elem.bt)*(now/100)),v1=Math.floor((fx.elem.bl)*(now/100));$("#"+fx.elem.id).css({width:fx.elem.fw+(fx.elem.bw-fx.elem.fw)*(now/100),height:fx.elem.fh+(fx.elem.bh-fx.elem.fh)*(now/100),top:fx.elem.ft+v0,left:fx.elem.fl+v1,zIndex:99999}).find("img").css({top:fx.elem.bt-v0,left:fx.elem.bl-v1})}})}).mouseleave(function(){$(this.v).stop(true,false).animate({st:0},{duration:ic_s.speed,step:function(now,fx){var v0=Math.floor((fx.elem.bt)*(now/100)),v1=Math.floor((fx.elem.bl)*(now/100));$("#"+fx.elem.id).css({width:fx.elem.fw+(fx.elem.bw-fx.elem.fw)*(now/100),height:fx.elem.fh+(fx.elem.bh-fx.elem.fh)*(now/100),top:fx.elem.ft+v0,left:fx.elem.fl+v1,zIndex:9999}).find("img").css({top:fx.elem.bt-v0,left:fx.elem.bl-v1})}})})})}})(jQuery);$(document).ready(function(){$(".imagecloud").imageCloud()});